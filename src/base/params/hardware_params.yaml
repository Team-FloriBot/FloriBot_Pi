hardware_node:
  ros__parameters:
    # =========================================================
    # I2C / Motorcontroller (NXT Servo Controller)
    # =========================================================
    i2c_dev: "/dev/i2c-1"
    i2c_addr: 0x58

    # Normalbetrieb: Kanäle pro Seite (links/rechts)
    # (aus euren Tests abgeleitet)
    left_channels:  [2, 0]   # fl, rl
    right_channels: [3, 1]   # fr, rr

    # =========================================================
    # Testmodus (Einzelrad-Ansteuerung)
    # =========================================================
    # false -> normaler Betrieb über /base/wheel_cmd (left/right)
    test_mode: false

    # Explizite Zuordnung: [fl, fr, rl, rr] -> Servo-Kanäle
    # (aus euren Tests abgeleitet)
    wheel_channels: [2, 3, 0, 1]

    # =========================================================
    # PWM / Servo Mapping
    # =========================================================
    k_us_per_pct: 5.5
    neutral_us: 1480
    min_us: 900
    max_us: 2100

    pct_min: -100
    pct_max: 100

    # Beschleunigungsrampe im Controller (0..255)
    acceleration: 30

    # Watchdog: STOP, wenn kein Kommando mehr kommt
    watchdog_timeout_ms: 300

    # =========================================================
    # Phidget Encoder (libphidget22)
    # =========================================================
    # Seriennummer des Phidgets
    # -1 = erstes gefundenes Gerät
    phidget_serial: -1

    # Zuordnung Phidget-Channel -> Rad
    # Reihenfolge: [fl, fr, rl, rr]
    # (aus euren Tests abgeleitet)
    encoder_channels: [2, 3, 0, 1]

    # Richtung invertieren (Vorwärtsdrehen soll positiv zählen)
    invert_fl: true
    invert_fr: false
    invert_rl: false
    invert_rr: false

    # Publish-Rate für /base/wheel_ticks4
    publish_ticks_ms: 20
